<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bootstrap - Ejercicios Estadísticos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ffeef4, #e8f4f8, #f0f8e8, #fff5e8);
            min-height: 100vh;
            color: #5a5a5a;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(45deg, #f8d7da, #d4f6e8);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .header h1 {
            color: #6c5b7b;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header p {
            color: #8b7d8b;
            font-size: 1.1rem;
        }

        .exercise-selector {
            background: linear-gradient(45deg, #e8f4f8, #ffeef4);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }

        .exercise-selector h3 {
            color: #5a85a1;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .exercise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .exercise-btn {
            background: linear-gradient(45deg, #c8e6c9, #b3e5fc);
            border: none;
            padding: 15px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #4a6741;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .exercise-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .exercise-btn.active {
            background: linear-gradient(45deg, #ffcdd2, #d1c4e9);
            color: #6a4c93;
        }

        .exercise-content {
            background: #ffffff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            border: 2px solid #f0f0f0;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #6c5b7b;
            font-weight: 600;
        }

        .input-group input, .input-group textarea, .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e8e8e8;
            border-radius: 10px;
            font-size: 14px;
            transition: border-color 0.3s ease;
            background: #fafafa;
        }

        .input-group input:focus, .input-group textarea:focus, .input-group select:focus {
            outline: none;
            border-color: #b3e5fc;
            background: #ffffff;
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 15px;
            align-items: end;
        }

        .calculate-btn {
            background: linear-gradient(45deg, #81c784, #64b5f6);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.25);
        }

        .results {
            background: linear-gradient(135deg, #f0f8e8, #e8f4f8);
            padding: 25px;
            border-radius: 15px;
            margin-top: 25px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }

        .results h4 {
            color: #4a6741;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .result-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            border-left: 4px solid #81c784;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        #histogramCanvas {
            max-width: 100%;
            height: 300px;
            border-radius: 10px;
        }

        .loading {
            text-align: center;
            color: #81c784;
            font-style: italic;
            padding: 20px;
        }

        .error {
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #f44336;
            margin-top: 10px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 Bootstrap Estadístico</h1>
            <p>Aplicación interactiva para resolver ejercicios de remuestreo Bootstrap</p>
        </div>

        <div class="exercise-selector">
            <h3>📊 Selecciona un Ejercicio</h3>
            <div class="exercise-grid">
                <button class="exercise-btn active" onclick="selectExercise(1)">Ejercicio 1: Media</button>
                <button class="exercise-btn" onclick="selectExercise(2)">Ejercicio 2: Dos Medias</button>
                <button class="exercise-btn" onclick="selectExercise(3)">Ejercicio 3: Proporciones</button>
                <button class="exercise-btn" onclick="selectExercise(4)">Ejercicio 4: Correlación</button>
                <button class="exercise-btn" onclick="selectExercise(5)">Ejercicio 5: Mediana</button>
                <button class="exercise-btn" onclick="selectExercise(6)">Ejercicio 6: Varianzas</button>
                <button class="exercise-btn" onclick="selectExercise(7)">Ejercicio 7: Regresión</button>
                <button class="exercise-btn" onclick="selectExercise(8)">Ejercicio 8: Dif. Proporciones</button>
                <button class="exercise-btn" onclick="selectExercise(9)">Ejercicio 9: Paramétrico</button>
                <button class="exercise-btn" onclick="selectExercise(10)">Ejercicio 10: Dependientes</button>
            </div>
        </div>

        <div id="exerciseContent" class="exercise-content">
            <!-- Exercise 1: Media -->
            <div id="exercise1" class="exercise">
                <h3>📈 Ejercicio 1: Estimación de la Media</h3>
                <p><strong>Contexto:</strong> Pesos de productos manufacturados (en gramos)</p>
                
                <div class="input-group">
                    <label>Datos (separados por comas):</label>
                    <textarea id="data1" rows="3" placeholder="502, 498, 505, 501, 499, 503, 497, 504, 500, 502, 498, 506, 499, 501, 504">502, 498, 505, 501, 499, 503, 497, 504, 500, 502, 498, 506, 499, 501, 504</textarea>
                </div>
                
                <div class="input-row">
                    <div class="input-group">
                        <label>Nivel de Confianza (%):</label>
                        <select id="confidence1">
                            <option value="90">90%</option>
                            <option value="95" selected>95%</option>
                            <option value="99">99%</option>
                        </select>
                    </div>
                    <button class="calculate-btn" onclick="calculateExercise1()">Calcular Bootstrap</button>
                </div>
                
                <div id="results1" class="results hidden"></div>
            </div>

            <!-- Exercise 2: Dos Medias -->
            <div id="exercise2" class="exercise hidden">
                <h3>⚖️ Ejercicio 2: Comparación de Dos Medias</h3>
                <p><strong>Contexto:</strong> Tiempo de respuesta de dos sistemas (en milisegundos)</p>
                
                <div class="input-group">
                    <label>Sistema A:</label>
                    <textarea id="dataA2" rows="2" placeholder="120, 115, 125, 118, 122, 119, 123, 117, 121, 124">120, 115, 125, 118, 122, 119, 123, 117, 121, 124</textarea>
                </div>
                
                <div class="input-group">
                    <label>Sistema B:</label>
                    <textarea id="dataB2" rows="2" placeholder="135, 132, 138, 134, 136, 133, 139, 131, 137, 140">135, 132, 138, 134, 136, 133, 139, 131, 137, 140</textarea>
                </div>
                
                <div class="input-row">
                    <div class="input-group">
                        <label>Nivel de Confianza (%):</label>
                        <select id="confidence2">
                            <option value="90">90%</option>
                            <option value="95" selected>95%</option>
                            <option value="99">99%</option>
                        </select>
                    </div>
                    <button class="calculate-btn" onclick="calculateExercise2()">Calcular Bootstrap</button>
                </div>
                
                <div id="results2" class="results hidden"></div>
            </div>

            <!-- Exercise 3: Proporciones -->
            <div id="exercise3" class="exercise hidden">
                <h3>🎯 Ejercicio 3: Estimación de Proporciones</h3>
                <p><strong>Contexto:</strong> Éxito en tratamiento médico (1 = éxito, 0 = fallo)</p>
                
                <div class="input-group">
                    <label>Datos (0s y 1s separados por comas):</label>
                    <textarea id="data3" rows="3" placeholder="1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1">1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1</textarea>
                </div>
                
                <div class="input-row">
                    <div class="input-group">
                        <label>Nivel de Confianza (%):</label>
                        <select id="confidence3">
                            <option value="90" selected>90%</option>
                            <option value="95">95%</option>
                            <option value="99">99%</option>
                        </select>
                    </div>
                    <button class="calculate-btn" onclick="calculateExercise3()">Calcular Bootstrap</button>
                </div>
                
                <div id="results3" class="results hidden"></div>
            </div>

            <!-- Exercise 4: Correlación -->
            <div id="exercise4" class="exercise hidden">
                <h3>📊 Ejercicio 4: Correlación Bootstrap</h3>
                <p><strong>Contexto:</strong> Relación entre horas de estudio y calificaciones</p>
                
                <div class="input-group">
                    <label>Horas de estudio:</label>
                    <textarea id="dataX4" rows="2" placeholder="2, 4, 3, 5, 1, 6, 3, 4, 2, 5, 7, 3, 4, 6, 2">2, 4, 3, 5, 1, 6, 3, 4, 2, 5, 7, 3, 4, 6, 2</textarea>
                </div>
                
                <div class="input-group">
                    <label>Calificaciones:</label>
                    <textarea id="dataY4" rows="2" placeholder="65, 78, 72, 85, 58, 88, 70, 79, 63, 82, 92, 68, 75, 86, 61">65, 78, 72, 85, 58, 88, 70, 79, 63, 82, 92, 68, 75, 86, 61</textarea>
                </div>
                
                <div class="input-row">
                    <div class="input-group">
                        <label>Nivel de Confianza (%):</label>
                        <select id="confidence4">
                            <option value="90">90%</option>
                            <option value="95" selected>95%</option>
                            <option value="99">99%</option>
                        </select>
                    </div>
                    <button class="calculate-btn" onclick="calculateExercise4()">Calcular Bootstrap</button>
                </div>
                
                <div id="results4" class="results hidden"></div>
            </div>

            <!-- Exercise 5: Mediana -->
            <div id="exercise5" class="exercise hidden">
                <h3>📊 Ejercicio 5: Mediana y Percentiles</h3>
                <p><strong>Contexto:</strong> Ingresos mensuales de empleados (en miles)</p>
                
                <div class="input-group">
                    <label>Datos:</label>
                    <textarea id="data5" rows="3" placeholder="2.5, 3.2, 2.8, 3.5, 2.9, 3.1, 2.7, 3.4, 3.0, 3.3, 2.6, 3.6, 2.9, 3.2, 2.8, 3.1, 2.7, 3.3, 3.0, 2.9">2.5, 3.2, 2.8, 3.5, 2.9, 3.1, 2.7, 3.4, 3.0, 3.3, 2.6, 3.6, 2.9, 3.2, 2.8, 3.1, 2.7, 3.3, 3.0, 2.9</textarea>
                </div>
                
                <div class="input-row">
                    <div class="input-group">
                        <label>Nivel de Confianza (%):</label>
                        <select id="confidence5">
                            <option value="90">90%</option>
                            <option value="95" selected>95%</option>
                            <option value="99">99%</option>
                        </select>
                    </div>
                    <button class="calculate-btn" onclick="calculateExercise5()">Calcular Bootstrap</button>
                </div>
                
                <div id="results5" class="results hidden"></div>
            </div>

            <!-- Exercise 6: Varianzas -->
            <div id="exercise6" class="exercise hidden">
                <h3>⚖️ Ejercicio 6: Razón de Varianzas</h3>
                <p><strong>Contexto:</strong> Variabilidad en dos procesos de producción</p>
                
                <div class="input-group">
                    <label>Proceso 1:</label>
                    <textarea id="dataA6" rows="2" placeholder="45.2, 44.8, 45.5, 44.9, 45.1, 45.0, 44.7, 45.3, 44.6, 45.4">45.2, 44.8, 45.5, 44.9, 45.1, 45.0, 44.7, 45.3, 44.6, 45.4</textarea>
                </div>
                
                <div class="input-group">
                    <label>Proceso 2:</label>
                    <textarea id="dataB6" rows="2" placeholder="43.8, 44.5, 43.2, 44.1, 43.9, 44.3, 43.6, 44.0, 43.7, 44.2">43.8, 44.5, 43.2, 44.1, 43.9, 44.3, 43.6, 44.0, 43.7, 44.2</textarea>
                </div>
                
                <div class="input-row">
                    <div class="input-group">
                        <label>Nivel de Confianza (%):</label>
                        <select id="confidence6">
                            <option value="90">90%</option>
                            <option value="95" selected>95%</option>
                            <option value="99">99%</option>
                        </select>
                    </div>
                    <button class="calculate-btn" onclick="calculateExercise6()">Calcular Bootstrap</button>
                </div>
                
                <div id="results6" class="results hidden"></div>
            </div>

            <!-- Exercise 7: Regresión -->
            <div id="exercise7" class="exercise hidden">
                <h3>📈 Ejercicio 7: Bootstrap en Regresión</h3>
                <p><strong>Contexto:</strong> Predicción de ventas basada en publicidad</p>
                
                <div class="input-group">
                    <label>Publicidad (x):</label>
                    <textarea id="dataX7" rows="2" placeholder="10, 15, 20, 25, 30, 35, 40, 45, 50, 55">10, 15, 20, 25, 30, 35, 40, 45, 50, 55</textarea>
                </div>
                
                <div class="input-group">
                    <label>Ventas (y):</label>
                    <textarea id="dataY7" rows="2" placeholder="23, 28, 35, 41, 46, 52, 58, 63, 69, 74">23, 28, 35, 41, 46, 52, 58, 63, 69, 74</textarea>
                </div>
                
                <div class="input-row">
                    <div class="input-group">
                        <label>Nivel de Confianza (%):</label>
                        <select id="confidence7">
                            <option value="90">90%</option>
                            <option value="95" selected>95%</option>
                            <option value="99">99%</option>
                        </select>
                    </div>
                    <button class="calculate-btn" onclick="calculateExercise7()">Calcular Bootstrap</button>
                </div>
                
                <div id="results7" class="results hidden"></div>
            </div>

            <!-- Exercise 8: Diferencia Proporciones -->
            <div id="exercise8" class="exercise hidden">
                <h3>⚖️ Ejercicio 8: Diferencia de Proporciones</h3>
                <p><strong>Contexto:</strong> Efectividad de dos tratamientos</p>
                
                <div class="input-group">
                    <label>Tratamiento A (0s y 1s):</label>
                    <textarea id="dataA8" rows="2" placeholder="1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1">1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1</textarea>
                </div>
                
                <div class="input-group">
                    <label>Tratamiento B (0s y 1s):</label>
                    <textarea id="dataB8" rows="2" placeholder="1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0">1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0</textarea>
                </div>
                
                <div class="input-row">
                    <div class="input-group">
                        <label>Nivel de Confianza (%):</label>
                        <select id="confidence8">
                            <option value="90">90%</option>
                            <option value="95" selected>95%</option>
                            <option value="99">99%</option>
                        </select>
                    </div>
                    <button class="calculate-btn" onclick="calculateExercise8()">Calcular Bootstrap</button>
                </div>
                
                <div id="results8" class="results hidden"></div>
            </div>

            <!-- Exercise 9: Paramétrico -->
            <div id="exercise9" class="exercise hidden">
                <h3>📊 Ejercicio 9: Bootstrap Paramétrico</h3>
                <p><strong>Contexto:</strong> Tiempo hasta fallo de componentes electrónicos (días) - Distribución Exponencial</p>
                
                <div class="input-group">
                    <label>Datos:</label>
                    <textarea id="data9" rows="3" placeholder="145, 167, 132, 178, 156, 143, 189, 134, 165, 152, 171, 148, 163, 139, 175">145, 167, 132, 178, 156, 143, 189, 134, 165, 152, 171, 148, 163, 139, 175</textarea>
                </div>
                
                <div class="input-row">
                    <div class="input-group">
                        <label>Nivel de Confianza (%):</label>
                        <select id="confidence9">
                            <option value="90">90%</option>
                            <option value="95" selected>95%</option>
                            <option value="99">99%</option>
                        </select>
                    </div>
                    <button class="calculate-btn" onclick="calculateExercise9()">Calcular Bootstrap</button>
                </div>
                
                <div id="results9" class="results hidden"></div>
            </div>

            <!-- Exercise 10: Dependientes -->
            <div id="exercise10" class="exercise hidden">
                <h3>📈 Ejercicio 10: Bootstrap con Datos Dependientes</h3>
                <p><strong>Contexto:</strong> Retornos diarios de acciones (%) - Bootstrap por bloques</p>
                
                <div class="input-group">
                    <label>Datos:</label>
                    <textarea id="data10" rows="3" placeholder="0.5, 1.2, -0.3, 0.8, 1.1, -0.6, 0.4, 0.9, -0.2, 1.3, 0.7, -0.4, 0.6, 1.0, -0.1, 0.8, 1.2, -0.5, 0.3, 0.9">0.5, 1.2, -0.3, 0.8, 1.1, -0.6, 0.4, 0.9, -0.2, 1.3, 0.7, -0.4, 0.6, 1.0, -0.1, 0.8, 1.2, -0.5, 0.3, 0.9</textarea>
                </div>
                
                <div class="input-row">
                    <div class="input-group">
                        <label>Tamaño de Bloque:</label>
                        <input type="number" id="blockSize10" value="4" min="2" max="10">
                    </div>
                    <div class="input-group">
                        <label>Nivel de Confianza (%):</label>
                        <select id="confidence10">
                            <option value="90">90%</option>
                            <option value="95" selected>95%</option>
                            <option value="99">99%</option>
                        </select>
                    </div>
                    <button class="calculate-btn" onclick="calculateExercise10()">Calcular Bootstrap</button>
                </div>
                
                <div id="results10" class="results hidden"></div>
            </div>
        </div>

        <div class="chart-container hidden" id="chartContainer">
            <h4>📊 Distribución Bootstrap</h4>
            <canvas id="histogramCanvas"></canvas>
        </div>
    </div>

    <script>
        let currentExercise = 1;
        let bootstrapSamples = 1000;

        function selectExercise(exerciseNum) {
            // Update active button
            document.querySelectorAll('.exercise-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Hide all exercises
            document.querySelectorAll('.exercise').forEach(ex => ex.classList.add('hidden'));
            
            // Show selected exercise
            document.getElementById(`exercise${exerciseNum}`).classList.remove('hidden');
            
            // Hide results and chart
            document.getElementById(`results${currentExercise}`).classList.add('hidden');
            document.getElementById('chartContainer').classList.add('hidden');
            
            currentExercise = exerciseNum;
        }

        function parseData(dataString) {
            return dataString.split(',').map(x => parseFloat(x.trim())).filter(x => !isNaN(x));
        }

        function mean(arr) {
            return arr.reduce((a, b) => a + b, 0) / arr.length;
        }

        function variance(arr) {
            const m = mean(arr);
            return arr.reduce((sum, x) => sum + Math.pow(x - m, 2), 0) / (arr.length - 1);
        }

        function standardDeviation(arr) {
            return Math.sqrt(variance(arr));
        }

        function median(arr) {
            const sorted = [...arr].sort((a, b) => a - b);
            const mid = Math.floor(sorted.length / 2);
            return sorted.length % 2 !== 0 ? sorted[mid] : (sorted[mid - 1] + sorted[mid]) / 2;
        }

        function percentile(arr, p) {
            const sorted = [...arr].sort((a, b) => a - b);
            const index = (p / 100) * (sorted.length - 1);
            const lower = Math.floor(index);
            const upper = Math.ceil(index);
            const weight = index % 1;
            return sorted[lower] * (1 - weight) + sorted[upper] * weight;
        }

        function correlation(x, y) {
            const n = x.length;
            const sumX = x.reduce((a, b) => a + b, 0);
            const sumY = y.reduce((a, b) => a + b, 0);
            const sumXY = x.reduce((sum, xi, i) => sum + xi * y[i], 0);
            const sumX2 = x.reduce((sum, xi) => sum + xi * xi, 0);
            const sumY2 = y.reduce((sum, yi) => sum + yi * yi, 0);
            
            return (n * sumXY - sumX * sumY) / Math.sqrt((n * sumX2 - sumX * sumX) * (n * sumY2 - sumY * sumY));
        }

        function linearRegression(x, y) {
            const n = x.length;
            const sumX = x.reduce((a, b) => a + b, 0);
            const sumY = y.reduce((a, b) => a + b, 0);
            const sumXY = x.reduce((sum, xi, i) => sum + xi * y[i], 0);
            const sumX2 = x.reduce((sum, xi) => sum + xi * xi, 0);
            
            const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
            const intercept = (sumY - slope *